<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
		<title>jQuery UI Example Page</title>
		<link type="text/css" href="css/ui-lightness/jquery-ui-1.8.13.custom.css" rel="stylesheet" />	
		<script type="text/javascript" src="js/jquery-1.5.1.min.js"></script>
		<script type="text/javascript" src="js/jquery-ui-1.8.13.custom.min.js"></script>
		<script type="text/javascript">
			$(function(){
				
				//
				// ping
				//
				
				$("#ping_button").button();
				$("#ping_button").click(function() {
					$("#ping_result").html('waiting for response...');
					$.ajax({
					  url: '/ping',
					  dataType: 'json',
					  success: function(data, textStatus, jqXHR) {
						  if(data.ok) {
							  $("#ping_result").html('PING OK');
						  } else {
							  $("#ping_result").html('no response');
						  }
					  },
					  error: function(jqXHR, textStatus, errorThrown) {
						alert('AJAX ERROR');
					  }
					});
				});
				
				//
				// validate_connection
				//
				
				$("#validate_connection_button").button();
				$("#validate_connection_button").click(function() {
					$("#validate_connection_result").html('waiting for response...');
					$.ajax({
					  url: '/validate_connection',
					  dataType: 'json',
					  success: function(data, textStatus, jqXHR) {
						  if(data.ok) {
							  $("#validate_connection_result").html('validation OK - ID: ' + data.random_value);
						  } else {
							  $("#validate_connection_result").html('ERROR');
						  }
					  },
					  error: function(jqXHR, textStatus, errorThrown) {
						alert('AJAX ERROR');
					  }
					});
				});
				
				//
				// Pin 13
				//
				
				$( "#pin13_radio" ).buttonset();
				// $(this).attr('id') -> ID of component that generated the event :-)
				$('#pin13_dis').change(function() {
					$("#pin13_radio_result").html('disabled');
				});
				$('#pin13_in').change(function() {
					$("#pin13_radio_result").html('INPUT');
				});
				$('#pin13_out').change(function() {
					$("#pin13_radio_result").html('OUTPUT');
				});
			});
		</script>
		<style type="text/css">
			body{ font: 62.5% sans-serif; margin: 20px;}
		</style>	
	</head>
	<body>
		
	<h1>Py-Arduino-Proxy</h1>
	
	<p>
		<button id="ping_button">Ping</button> &nbsp; | Result: <span id="ping_result"></span>
	</p>
	<p>
		<button id="validate_connection_button">Validate connection</button> &nbsp; | Result: <span id="validate_connection_result"></span>
	</p>
	
	<p id="pin13_radio">
		Pin 13 - Mode: &nbsp;
		<input type="radio" id="pin13_dis" name="pin13_mode" checked="checked"/><label for="pin13_dis">Disabled</label>
		<input type="radio" id="pin13_in" name="pin13_mode" /><label for="pin13_in">Input</label>
		<input type="radio" id="pin13_out" name="pin13_mode" /><label for="pin13_out">Output</label>
		&nbsp; | Digital Write: &nbsp;
		<input type="radio" id="pin13_lo" name="pin13_dw" /><label for="pin13_lo">Low</label>
		<input type="radio" id="pin13_hi" name="pin13_dw" /><label for="pin13_hi">High</label>
		&nbsp; | Current state: <span id="pin13_radio_result">disabled</span>
	</p>
	
	</body>
</html>


