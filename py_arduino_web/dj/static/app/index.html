<!doctype html>
<html ng-app='PyArduino'>
<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet"
	href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet"
	href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-theme.min.css">

<link rel="stylesheet" href="/static/app/angular-slider.css">

<script src="//code.jquery.com/jquery.js"></script>

<!-- Latest compiled and minified JavaScript -->
<script
	src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

<script
	src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.8/angular.min.js"></script>

<script src="/static/app/ui-bootstrap-tpls-0.6.0.min.js"></script>

<script src="/static/app/angular-slider.js"></script>

<script src="/static/app/controllers.js"></script>

<style type="text/css">
INPUT.pin_label {
	height: 24px;
	line-height: 1;
	padding-left: 2px;
}
</style>

</head>
<body ng-controller="GlobalController">

	<!-- Fixed navbar -->
	<div class="navbar navbar-default navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse"
					data-target=".navbar-collapse">
					<span class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="#">py-arduino</a>
			</div>
			<div class="navbar-collapse collapse">
				<ul class="nav navbar-nav">
					<li class="active"><a href="#">Home</a></li>
					<li><a href="#about">About</a></li>
					<li><a href="#contact">Contact</a></li>
					<li class="dropdown"><a href="#" class="dropdown-toggle"
						data-toggle="dropdown">Dropdown <b class="caret"></b></a>
						<ul class="dropdown-menu">
							<li><a href="#">Action</a></li>
							<li><a href="#">Another action</a></li>
							<li><a href="#">Something else here</a></li>
							<li class="divider"></li>
							<li class="dropdown-header">Nav header</li>
							<li><a href="#">Separated link</a></li>
							<li><a href="#">One more separated link</a></li>
						</ul></li>
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li><a href="../navbar/">Default</a></li>
					<li><a href="../navbar-static-top/">Static top</a></li>
					<li class="active"><a href="./">{{ avr_cpu_type }}</a></li>
				</ul>
			</div>
			<!--/.nav-collapse -->
		</div>
	</div>

	<div class="container" style="padding-top: 70px;">

		<div ng-controller="PinsController" ng-init="refreshPinInfo()">

			<table class="table table-condensed table-hover">

				<tr>
					<th width="1%"><a href="javascript:void(0);"
						data-toggle="tooltip" title="Indicates pins with PWM support"><span
							class="glyphicon glyphicon-question-sign"></span></a></th>
					<th width="50%" colspan="2">Pin #</th>
					<th width="1%">&nbsp;</th>
					<th width="40%">Mode</th>
					<th width="10%">IO</th>
				</tr>

				<!--
            // .... .... "pwm": false,
            // .... .... "enabled_in_web": true,
            // .... .... "pin": 0,
            // .... .... "pin_id": null,
            // .... .... "status_written_value": null,
            // .... .... "status_read_value": null,
            // .... .... "status_mode": null,
            // .... .... "digital": true,
            // .... .... "pk": 1,
            // .... .... "label": "Digital pin #0"
            -->

				<tr
					ng-repeat="pin_struct in enhanced_arduino_type.digital_pins_struct">

					<td width="1%">
						<!-- PWM: {{ pin_struct.pwm }} --> <a href="javascript:void(0);"
						ng-show="pin_struct.pwm" data-toggle="tooltip"
						title="This pin has PWM support"><span
							class="glyphicon glyphicon-ok-circle"></span></a>
					</td>

					<td style="text-align: right;" width="1%">D{{pin_struct.pin}}</td>

					<td><a href="javascript:void(0);" ng-show="! editMode">{{pin_struct.label}}</a>
						<input type="text" ng-model="pin_struct.label"
						class="col-lg-3 input-sm pin_label" ng-show="editMode" /></td>

					<td width="1%"><a href="javascript:void(0);"
						ng-show="! pin_struct.enabled_in_web" data-toggle="tooltip"
						title="This pin is configured to not be modified from web interface"
						style="margin-left: 4px;"><span
							class="glyphicon glyphicon-question-sign"></span></a></td>
					<td>
						<div class="btn-group btn-group-xs">
							<button ng-disabled="! pin_struct.enabled_in_web" type="button"
								ng-click="pinModeDisabled(pin_struct)" class="btn"
								ng-class="pin_struct.css_for_button_unknown_mode">X</button>
							<button ng-disabled="! pin_struct.enabled_in_web" type="button"
								ng-click="pinModeInput(pin_struct)" class="btn"
								ng-class="pin_struct.css_for_button_input_mode">INPUT</button>
							<button ng-disabled="! pin_struct.enabled_in_web" type="button"
								ng-click="pinModeOutput(pin_struct)" class="btn"
								ng-class="pin_struct.css_for_button_output_mode">OUTPUT</button>
						</div>
					</td>
					<td><slider floor="0" ceiling="1023" step="1" precision="1"
							ng-model="pin_struct.xxxxxxxxxxxxxxxxxxxxx" ng-show="pin_struct.pwm"></slider>
							<!-- <input type="text"
						ng-model="pin_struct.xxxxxxxxxxx" class="input-sm" ng-show="true"
						style="height: 24px; line-height: 1; width: 5em;" /></td>-->
				</tr>

				<!--
            // "analog_pins_struct": [
            // .... {
            // .... "pwm": false,
            // .... "enabled_in_web": true,
            // .... "pin": 0,
            // .... "pin_id": null,
            // .... "status_written_value": null,
            // .... "status_read_value": null,
            // .... "status_mode": null,
            // .... "digital": true,
            // .... "pk": 55,
            // .... "label": "Analog pin #0"
            // .... },
            -->

				<tr
					ng-repeat="pin_struct in enhanced_arduino_type.analog_pins_struct">

					<td width="1%">
						<!-- PWM: {{ pin_struct.pwm }} --> <span
						class="glyphicon glyphicon-ok-circle" ng-show="pin_struct.pwm"></span>
					</td>

					<td style="text-align: right;" width="1%">A{{pin_struct.pin}}</td>

					<td><a href="javascript:void(0);" ng-show="! editMode">{{pin_struct.label}}</a>
						<input type="text" ng-model="pin_struct.label"
						class="col-lg-3 input-sm pin_label" ng-show="editMode" /></td>

					<td width="1%"><a href="javascript:void(0);"
						ng-show="! pin_struct.enabled_in_web" data-toggle="tooltip"
						title="This pin is configured to not be modified from web interface"
						style="margin-left: 4px;"><span
							class="glyphicon glyphicon-question-sign"></span></a></td>
					<td>
						<div class="btn-group btn-group-xs">
							<button ng-disabled="! pin_struct.enabled_in_web" type="button"
								ng-click="pinModeDisabled(pin_struct)" class="btn"
								ng-class="pin_struct.css_for_button_unknown_mode">X</button>
							<button ng-disabled="! pin_struct.enabled_in_web" type="button"
								ng-click="pinModeInput(pin_struct)" class="btn"
								ng-class="pin_struct.css_for_button_input_mode">INPUT</button>
						</div>
					</td>

					<td><input type="text" ng-model="pin_struct.xxxxxxxxxxx"
						class="input-sm" ng-show="true"
						style="height: 24px; line-height: 1; width: 5em;" /></td>

				</tr>

			</table>

			<button class="btn btn-primary" ng-click="refreshPinInfo()">
				<span class="glyphicon glyphicon-refresh"></span> Refresh
			</button>

			<button class="btn btn-primary" ng-click="editModeEnter()"
				ng-show="! editMode">
				<span class="glyphicon glyphicon-pencil"></span> Edit labels
			</button>

			<button class="btn btn-danger" ng-click="editModeExit()"
				ng-show="editMode">
				<span class="glyphicon glyphicon-ok"></span> Finish edition
			</button>

		</div>

	</div>
	<!-- /container -->

</body>
</html>
