<div ng-init="checkConnection()">

	<div ng-show="flags.checkingConnection">
		<i class="icon-spinner icon-spin icon-large"></i> Checking
		connection...
	</div>

	<div ng-show="flags.connecting">
		<i class="icon-spinner icon-spin icon-large"></i> Connecting...
	</div>

	<div ng-show="! (flags.checkingConnection || flags.connecting)">

		<div ng-show="data.pyro_not_contacted"
			class="alert alert-danger alert-dismissable">
			<button type="button" class="close" data-dismiss="alert"
				aria-hidden="true">&times;</button>
			Couldn't make contact with PyRO server
			<button class="btn-sm btn btn-danger" ng-click="checkConnection()">Re-check</button>
		</div>

		<div ng-show="! data.pyro_not_contacted">

			<div ng-show="data.connection_attempt_failed"
				class="alert alert-danger alert-dismissable">
				<button type="button" class="close" data-dismiss="alert"
					aria-hidden="true">&times;</button>
				Connection attempt failed!
			</div>

			<div ng-show="data.connected"
				class="alert alert-success alert-dismissable">
				<button type="button" class="close" data-dismiss="alert"
					aria-hidden="true">&times;</button>
				Connection OK! &nbsp;&nbsp;&nbsp;
				<button class="btn-sm btn btn-success"
					ng-click="disconnectArduino()">Disconnect</button>
			</div>

			<div ng-show="! data.connected">

				<table class="table table-condensed table-hover">
					<tr>
						<th width="30%" style="text-align: right;">Detected serial ports:</th>
						<td width="70%">
							<div ng-repeat="port in data.serial_ports">
								<button ng-click="connectArduino(port)"
									class="btn btn-primary btn-sm">Connect to {{port}}</button>
							</div>
							<div ng-show="! data.serial_ports.length">
								<small>No serial port detected</small>
							</div>
						</td>
					</tr>
					<tr>
						<th width="30%" style="text-align: right; vertical-align: middle;">Virtual ports:</th>
						<td width="70%">
							<button ng-click="connectArduino(flags.emulator_port)"
								class="btn btn-primary btn-sm">Connect to emulator</button>
						</td>
					</tr>
					<tr>
						<th style="text-align: right; vertical-align: middle;">Connect to:</th>
						<td><input type="text" ng-model="flags._port"
							class="input-sm pin_label">
							<button ng-click="connectArduino(flags._port)"
								class="btn btn-primary btn-sm">Connect</button></td>
					</tr>
					<tr>
					   <td>&nbsp;</td>
					   <td><button ng-click="checkConnection()"
                                class="btn btn-primary btn-sm"><span class="glyphicon glyphicon-refresh"></span> Refresh</button></td>
					</tr>
				</table>

			</div>

		</div>

	</div>
	<!-- ! checkingConnection -->

</div>